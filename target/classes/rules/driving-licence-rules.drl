package rules

import com.example.dl.model.LicenseApplication;

rule "Reject if under minimum age"
when
    $app : LicenseApplication( age < 18 )
then
    $app.setEligible(false);
    $app.setRejectionReason("Applicant is under 18 years old");
end

rule "Reject if no learner permit"
when
    $app : LicenseApplication( learnerPermit == false )
then
    $app.setEligible(false);
    $app.setRejectionReason("Learner permit is required");
end

rule "Reject if theory test failed"
when
    $app : LicenseApplication( theoryTestPassed == false )
then
    $app.setEligible(false);
    $app.setRejectionReason("Theory test not passed");
end

rule "Reject if driving test failed"
when
    $app : LicenseApplication( drivingTestPassed == false )
then
    $app.setEligible(false);
    $app.setRejectionReason("Driving test not passed");
end

rule "Reject if too many violations"
when
    $app : LicenseApplication( trafficViolationsLastYear > 3 )
then
    $app.setEligible(false);
    $app.setRejectionReason("Too many traffic violations in the last year");
end

rule "Reject if medically unfit"
when
    $app : LicenseApplication( medicallyFit == false )
then
    $app.setEligible(false);
    $app.setRejectionReason("Applicant is not medically fit");
end

rule "Approve license"
salience -10
when
    $app : LicenseApplication( eligible == false || eligible == null )
then
    $app.setEligible(true);
    $app.setRejectionReason(null);
end
